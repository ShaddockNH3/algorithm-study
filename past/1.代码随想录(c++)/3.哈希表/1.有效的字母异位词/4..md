
```cpp
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        if(s.size()<p.size()){
            return {};
        }
        sort(p.begin(),p.end());
        vector<int> ans;
        for(int i=0;i<s.size()-p.size()+1;i++){
            string s_piece=s.substr(i,p.size());
            sort(s_piece.begin(),s_piece.end());
            if(s_piece==p){
                ans.push_back(i);
            }
        }
        return ans;
    }
};
```

```cpp
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        if (s.size() < p.size()) {
            return {};
        }
        unordered_map<char, int> phasmap;
        for (const auto& word : p) {
            phasmap[word] += 1;
        }

        vector<int> ans;
        unordered_map<char, int> shasmap;
        int match = 0;
        int left = 0, right = 0;

        while (right < s.size()) {
            shasmap[s[right]] += 1;
            if (phasmap.count(s[right]) > 0 &&
                phasmap[s[right]] == shasmap[s[right]]) {
                match += 1;
            }

            if (right - left == p.size() - 1) {
                if (match == phasmap.size()) {
                    ans.push_back(left);
                }
                if (phasmap.count(s[left]) > 0 &&
                    phasmap[s[left]] == shasmap[s[left]]) {
                    match -= 1;
                }
                shasmap[s[left]] -= 1;
                left += 1;
            }
            right += 1;
        }

        return ans;
    }
};
```