[DS X 班级实验作业](http://ds.fzu.edu.cn/std/exp/bf5279a1-1205-4fac-86cd-dc2b5a821f48/7b259d05-8f24-4161-a527-0a3b41643fc0/022aaaa6-e733-494e-9784-6338327b8a8d/)

数据结构与算法实验题 1.4 主元素问题

★实验任务

给定含有n 个元素的多重集合S ={A1,A2,…,An},1<=Ai<=n,1<=i<=n,每个元素在S 中出现的次数称为该元素的重数。多重集S 中重数大于n/2 的元素称为主元素。  
例如，S = {2,2,4,2,1,2,5,2,2,8}。  
多重集S 的主元素是2，其重数为6。  
现在给定一个n 个元素的多重集合S ={A1,A2,…,An},1<=Ai<=n,1<=i<=n,计算S的主元  
素。

★数据输入

输入数据两行。  
第一行一个正整数n（1<=n<=400000）,表示多重集合S 中元素的个数。  
第二行有n个正整数（每两个数字含一个空格）。

★数据输出

若多重集合存在主元素，输出主元素，否则输出 0。

|输入示例|
|---|
|10|
|2 2 4 2 1 2 5 2 2 8|

|输出示例|
|---|
|2|

### Boyer–Moore投票算法

```
#include<iostream>
using namespace std;

int arr[400005];

int main(){
    int n;cin>>n;
    for (int i=0;i<n;i++){
        cin>>arr[i];
    }

    int can=0;
    int cnt=0;

    for(int i=0;i<n;i++){
        if (cnt==0){
            can=arr[i];
            cnt=1;
        }
        else if (can==arr[i]){
            cnt+=1;
        }
        else{
            cnt-=1;
        }
    }
    
    cnt=0;

    for(int i=0;i<n;i++){
        if (can==arr[i]){
            cnt+=1;
        }
    }

    int now=0;
    
    if(cnt>n/2){
        now=can;
    }

    cout<<now<<endl;
    
    return 0;
}
```

主体思路如下，首先什么是主元素，主元素就是在整个数组内，数量大于一半的元素。

BM投票法的意思大概如下：

进行两次遍历，第一次遍历我们不需要直接求解出原问题，我们只需要关心哪个元素在一个局部范围内最多。

如果是主元素的话，那么其数量必定超过n/2，所以引入一个计数器cnt，当前假定的主元素element=arr[i]，第一次遍历数组，只要下一个元素也是element，那么cnt+=1，如果不是，那么cnt-=1，当cnt变成0的时候，说明这个元素必然不是主元素，或者说在当前局部内并非主元素。

当一整遍遍历完之后，我们求解了所有的局部最多的元素，在遍历的过程中，我们通过局部最多的元素找出了可能的全局最多解。

而第二遍遍历则是为了确认其是否确实为主元素，因为局部最优解可能并非全局最优解。