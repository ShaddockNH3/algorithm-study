```
#include<vector>
#include<iostream>
#include<unordered_map>

using namespace std;

class UnionFind {
private:
	vector<int> parent;
	vector<int> rank;

public:
	UnionFind(int n) {
		parent.resize(n + 1);
		rank.resize(n + 1, 1);
		for (int i = 1; i <= n; i++) {
			parent[i] = i;
		}
	}

	int find(int x) {
		if (parent[x] != x) {
			parent[x] = find(parent[x]);
		}
		return parent[x];
	}

	void unite(int x, int y) {
		int rootX = find(x);
		int rootY = find(y);

		if (rank[rootX] > rank[rootY]) {
			parent[rootY] = rootX;
		}
		else if (rank[rootX] < rank[rootY]) {
			parent[rootX] = rootY;
		}
		else {
			parent[rootY] = rootX;
			rank[rootX]++;
		}
	}

	bool is_connected(int x, int y) {
		return find(x) == find(y);
	}
};

void solve() {
	int n, m; cin >> n >> m;
	UnionFind uf(n);
	int a, b;
	for (int i = 0; i < m; i++) {
		cin >> a >> b;
		uf.unite(a, b);
	}

	unordered_map<int, int> umap;
	unordered_map<int ,int>::iterator t;

	for (int i = 1; i <= n; i++) {
		umap[uf.find(i)]++;
	}
	
	int max = 0;

	for (t = umap.begin(); t != umap.end(); t++) {
		if (max < t->second) {
			max = t->second;
		}
	}

	cout << max << endl;
}

int main() {
	solve();
	return 0;
}
```




两种实现方式的区别：


















```
#define _CRT_SECURE_NO_WARNINGS

#define LL long long
#define EPS 1e-8
#define INF 0x7fffffff
#define lyh(i,a,b) for(int i=a;i<=b;i++)
#define hyl(i,a,b) for(int i=a;i>=b;i--)
#define debug(a) cout<<#a<<"="<<a<<endl;

#include<bits/stdc++.h>
#include<unordered_map>

using namespace std;

class UnionFind {
private:
	vector<int> parent;
	vector<int> rank;
public:
	UnionFind(int n) {
		parent.resize(n + 1);
		rank.resize(n + 1,1);
		lyh(i, 1, n) {
			parent[i] = i;
		}
	}

	int find(int x) {
		if (parent[x] != x) {
			parent[x] = find(parent[x]);
		}
		return parent[x];
	}

	void unite(int x, int y) {
		int rootx = find(x);
		int rooty = find(y);

		if (rank[rootx]>rank[rooty]) {
			parent[rooty] = rootx;
		}
		else if (rank[rootx] < rank[rootx]) {
			parent[rootx] = rooty;
		}
		else {
			parent[rooty] = rootx;
			rank[rootx]++;
		}
	}
	
	bool is_connected(int x, int y) {
		return find(x) == find(y);
	}
};

void solve() {
	int n, m; cin >> n >> m;
	UnionFind uf(n);
	int a, b;
	lyh(i,1,m){
		cin >> a>> b;
		uf.unite(a, b);
	}

	unordered_map<int, int> umap;
	unordered_map<int, int>::iterator it;

	lyh(i, 1, n) {
		umap[uf.find(i)] += 1;
	}

	int max = 0;

	for (it = umap.begin(); it != umap.end(); it++) {
		if (max < it->second) {
			max = it->second;
		}
	}

	cout << max << endl;
}

int main() {
	solve();
	return 0;
}

```