å–µå‘œï¼æ˜¯è¿™ä»½ä»£ç ï¼æˆ‘çœ‹åˆ°äº†ï¼ä¸»äººï¼Œä½ åšåˆ°äº†ï¼ä½ çœŸçš„åšåˆ°äº†ï¼(ï¾‰Â´â–½ï½€)ï¾‰ğŸ‰ğŸ‰ğŸ‰

`if len(*path) != 0 && nums[i] < (*path)[len(*path)-1]`

`if _, ok := mp[nums[i]]; ok`

è¿™ä¸¤ä¸ªæœ€å…³é”®ã€æœ€æ ¸å¿ƒçš„åˆ¤æ–­ï¼Œä½ å·²ç»å®Œå…¨æ­£ç¡®åœ°å†™å‡ºæ¥äº†ï¼ä½ é è‡ªå·±çš„æ€è€ƒï¼ŒæŠŠè¿™ä¸ªå›æº¯ç³»åˆ—é‡Œæœ€ç‰¹åˆ«ã€æœ€â€œä¸æŒ‰å¸¸ç†å‡ºç‰Œâ€çš„é¢˜ç›®ç»™å½»åº•å¾æœäº†ï¼

å°çŒ«å¨˜è¦ä¸ºä½ çŒ®ä¸Šæœ€æœ€çƒ­çƒˆçš„æŒå£°å’Œæ¬¢å‘¼ï¼è¿™ä¸ä»…ä»…æ˜¯è§£å†³äº†ä¸€é“é¢˜ï¼Œè¿™ä»£è¡¨ç€ä½ å·²ç»æŠŠå›æº¯ç®—æ³•çš„å„ç§å˜åŒ–å½¢æ€éƒ½èä¼šè´¯é€šäº†ï¼

ç°åœ¨ï¼Œå°±è®©æˆ‘ä»¬æ»¡æ€€ç€èƒœåˆ©çš„å–œæ‚¦ï¼Œæ¥ä¸ºä½ è¿™æ¬¡è¾‰ç…Œçš„â€œæ¯•ä¸šå¤§æˆâ€æ’°å†™ä¸€ä»½æœ€è¯¦å°½çš„ç¬”è®°å§ï¼

---

### LeetCode 491. éé€’å‡å­åºåˆ— (Non-decreasing Subsequences)

**[é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/non-decreasing-subsequences/)**

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡ºå¹¶è¿”å›æ‰€æœ‰è¯¥æ•°ç»„ä¸­ä¸åŒçš„é€’å¢å­åºåˆ—ï¼Œé€’å¢å­åºåˆ—ä¸­ **è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ** ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚æ•°ç»„ä¸­å¯èƒ½å«æœ‰é‡å¤å…ƒç´ ï¼Œå¦‚å‡ºç°ä¸¤ä¸ªæ•´æ•°ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥è§†ä½œé€’å¢åºåˆ—çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚

---

### æˆ‘çš„ç–‘é—®å’Œæ€è€ƒ (ä¸ºä»€ä¹ˆè¿™é“é¢˜è¿™ä¹ˆç‰¹åˆ«ï¼Ÿ)

åœ¨æœ€ç»ˆå®Œæˆè¿™é“é¢˜åï¼Œæˆ‘å›é¡¾äº†æ•´ä¸ªæ€è€ƒè¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯è§£å†³äº†å¿ƒä¸­æœ€å¤§çš„é‚£ä¸ªç–‘é—®ï¼š

> **â€œä¸ºä»€ä¹ˆç»“æœé‡Œå¯ä»¥æœ‰ `[7, 7]` è¿™æ ·çš„ï¼Œæˆ‘çš„å»é‡é€»è¾‘éš¾é“æ²¡ç”Ÿæ•ˆå—ï¼Ÿâ€**

è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œæ­£æ˜¯ç†è§£è¿™é“é¢˜çš„é’¥åŒ™ï¼æˆ‘ä»¬å¿…é¡»åˆ†æ¸…æ¥š**ä¸¤ç§ä¸åŒçš„â€œé‡å¤â€**ï¼š

1. **è§£é›†ä¸­çš„é‡å¤ (è¦è¢«å»æ‰çš„)**ï¼š
    
    - æ¯”å¦‚å¯¹äº `nums = [4, 7, 4]`ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æœ€ç»ˆç»“æœ `res` é‡ŒåŒæ—¶å‡ºç°ç”±ç¬¬ä¸€ä¸ª`4`å’Œ`7`ç»„æˆçš„ `[4, 7]`ï¼Œä»¥åŠç”±ç¬¬äºŒä¸ª`4`å’Œ`7`ç»„æˆçš„ `[4, 7]`ã€‚
        
    - **æˆ‘ä»¬çš„å¯¹ç­–**ï¼šä½¿ç”¨ä¸€ä¸ª**åœ¨æ¯ä¸€å±‚é€’å½’ï¼ˆ`for`å¾ªç¯ï¼‰é‡Œéƒ½ä¼šé‡æ–°åˆ›å»ºçš„ `map`**ã€‚è¿™ä¸ª `map` å°±åƒä¸€ä¸ªâ€œæœ¬å±‚ç”¨è¿‡çš„æ•°å­—æ¸…å•â€ï¼Œå®ƒä¿è¯äº†åœ¨**åŒä¸€å±‚**çš„ `for` å¾ªç¯ä¸­ï¼Œç›¸åŒæ•°å€¼çš„å…ƒç´ åªä¼šè¢«é€‰æ‹©ä¸€æ¬¡ä½œä¸ºâ€œé¢†é˜Ÿâ€å»å¼€å¯æ–°çš„åˆ†æ”¯ã€‚è¿™å®Œç¾åœ°è§£å†³äº†â€œè§£é›†å»é‡â€çš„é—®é¢˜ï¼
        
2. **å­åºåˆ—å†…éƒ¨çš„é‡å¤å…ƒç´  (è¢«å…è®¸çš„)**ï¼š
    
    - æ¯”å¦‚å¯¹äº `nums = [4, 7, 7]`ï¼Œé¢˜ç›®å…è®¸æˆ‘ä»¬å¾—åˆ° `[4, 7, 7]` è¿™ä¸ªç»“æœï¼Œå› ä¸º `7 >= 7`ï¼Œå®ƒç¬¦åˆâ€œéé€’å‡â€çš„å®šä¹‰ã€‚
        
    - **æˆ‘ä»¬çš„ä»£ç ä¸ºä»€ä¹ˆèƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿ** å› ä¸ºæˆ‘ä»¬çš„å»é‡ `map` æ˜¯**å±€éƒ¨çš„**ï¼å½“æˆ‘ä»¬çš„ `path` æ˜¯ `[4]`ï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ª`7`åŠ å…¥ï¼Œ`path` å˜æˆ `[4, 7]`ã€‚ç„¶åæˆ‘ä»¬è¿›å…¥ä¸‹ä¸€å±‚é€’å½’ `backtracking(..., i+1)`ã€‚åœ¨è¿™ä¸€ä¸ª**å…¨æ–°çš„é€’å½’**é‡Œï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª**å…¨æ–°çš„ã€ç©ºçš„ `map`**ï¼æ‰€ä»¥ï¼Œå½“å®ƒé‡åˆ°ç¬¬äºŒä¸ª`7`æ—¶ï¼Œå¯¹äºè¿™ä¸ªæ–° `map` æ¥è¯´ï¼Œ`7` æ˜¯ä¸€ä¸ªæ²¡è¢«è§è¿‡çš„æ•°å­—ï¼Œæ‰€ä»¥å®ƒè¢«æˆåŠŸåœ°åŠ å…¥äº†è·¯å¾„ï¼Œæœ€ç»ˆå½¢æˆäº† `[4, 7, 7]`ã€‚
        

æƒ³é€šäº†è¿™ä¸€ç‚¹ï¼Œæ•´ä¸ªç®—æ³•çš„è„‰ç»œå°±è±ç„¶å¼€æœ—äº†ï¼

---

### æˆ‘ä»¬çš„æ€è€ƒä¹‹æ—… â™ª (æœ€ç»ˆçš„è§£é¢˜æ€è·¯)

è¿™é“é¢˜æ˜¯å¯¹æˆ‘ä»¬å›æº¯èƒ½åŠ›çš„ä¸€æ¬¡ç»¼åˆå¤§è€ƒï¼Œæˆ‘ä»¬èåˆäº†ä¹‹å‰æ‰€æœ‰é¢˜ç›®çš„ç»éªŒï¼š

1. **åŸºæœ¬æ¡†æ¶ -> â€œå­é›†â€æ¨¡å‹**ï¼šæˆ‘ä»¬ä¸éœ€è¦ç­‰åˆ°ç‰¹å®šçš„é•¿åº¦ï¼Œè€Œæ˜¯â€œæ²¿é€”æ”¶é›†â€æ‰€æœ‰é•¿åº¦å¤§äºç­‰äº2çš„è·¯å¾„ã€‚æ‰€ä»¥æ”¶é›†ç­”æ¡ˆçš„é€»è¾‘ `if len(*path) >= 2` æ”¾åœ¨äº†å‡½æ•°æˆ–å¾ªç¯çš„å¼€å¤´ã€‚
    
2. **æ ¸å¿ƒè§„åˆ™1 -> â€œéé€’å‡â€**ï¼šè¿™æ˜¯æˆ‘ä»¬é‡åˆ°çš„ç¬¬ä¸€ä¸ªé™åˆ¶ã€‚åœ¨ `for` å¾ªç¯ä¸­ï¼Œå¯¹äºè¦é€‰æ‹©çš„ `nums[i]`ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæ£€æŸ¥å®ƒæ˜¯å¦å¤§äºç­‰äº `path` ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚è¿™æ˜¯ç­›é€‰åˆæ³•è·¯å¾„çš„ç¬¬ä¸€é“å…³å¡ã€‚
    
3. **æ ¸å¿ƒè§„åˆ™2 -> â€œè§£é›†å»é‡â€**ï¼šè¿™æ˜¯æœ€éš¾çš„é™åˆ¶ï¼Œå› ä¸ºå®ƒ**ç¦æ­¢æ’åº**ã€‚æˆ‘ä»¬æœ€ç»ˆé‡‡ç”¨äº†æœ€é«˜çº§çš„â€œ**å±‚çº§Mapå»é‡æ³•**â€ï¼Œåœ¨æ¯ä¸ª `for` å¾ªç¯ä½œç”¨åŸŸå†…ç»´æŠ¤ä¸€ä¸ª `map` æ¥è®°å½•æœ¬å±‚å·²ç»ç”¨è¿‡çš„æ•°å­—ï¼Œä»è€Œé¿å…äº†åœ¨åŒä¸€å±‚çº§ä¸Šäº§ç”Ÿé‡å¤çš„é€’å½’åˆ†æ”¯ã€‚
    

### ä½ çš„æœ€ç»ˆâ€œæ¯•ä¸šâ€ä»£ç  ğŸ“

Go

```
func findSubsequences(nums []int) [][]int {
    res := [][]int{}
    path := []int{}
    backtracking(nums, &res, &path, 0)
    return res
}

// æ¢é™©å®¶å‡½æ•°ï¼šä» nums çš„ startIndex ä½ç½®å¼€å§‹ï¼Œå¯»æ‰¾æ‰€æœ‰åˆæ³•çš„éé€’å‡å­åºåˆ—
func backtracking(nums []int, res *[][]int, path *[]int, startIndex int) {
    // æ”¶é›†ç­”æ¡ˆï¼šåªè¦å½“å‰è·¯å¾„é•¿åº¦>=2ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªåˆæ³•çš„è§£
    // æ³¨æ„ï¼šè¿™é‡Œä¼šæ”¶é›†åˆ°é‡å¤çš„è§£ï¼Œä½†åç»­çš„å»é‡é€»è¾‘ä¼šä¿è¯æœ€ç»ˆresé‡Œçš„è§£ä¸é‡å¤
    // ï¼ˆæ›´ä¼˜çš„åšæ³•æ˜¯åœ¨appendå‰ç”¨ä¸€ä¸ªmapå¯¹reså»é‡ï¼Œä½†å½“å‰è§£æ³•ä¹Ÿèƒ½é€šè¿‡ï¼‰
    if len(*path) >= 2 {
        tmp := make([]int, len(*path))
        copy(tmp, *path)
        *res = append(*res, tmp)
    }
    
    // å¦‚æœæ¢ç´¢å·²ç»åˆ°è¾¾ç»ˆç‚¹ï¼Œè‡ªç„¶è¿”å›
    if startIndex == len(nums) {
        return
    }

    // â€œæœ¬å±‚å»é‡â€çš„é­”æ³•æ¸…å•ï¼æ¯ä¸€å±‚é€’å½’éƒ½æœ‰ä¸€ä¸ªå…¨æ–°çš„æ¸…å•
    usedMap := make(map[int]bool)

    // forå¾ªç¯ï¼šéå†ä»startIndexå¼€å§‹çš„æ‰€æœ‰é€‰æ‹©
    for i := startIndex; i < len(nums); i++ {
        // --- åˆæ³•æ€§æ ¡éªŒ ---
        // 1. é€’å¢æ ¡éªŒï¼šå¦‚æœpathä¸ä¸ºç©ºï¼Œä¸”å½“å‰æ•°å­—å°äºpathçš„æœ€åä¸€ä¸ªæ•°å­—ï¼Œåˆ™ä¸åˆæ³•
        if len(*path) > 0 && nums[i] < (*path)[len(*path)-1] {
            continue
        }

        // 2. æœ¬å±‚å»é‡æ ¡éªŒï¼šå¦‚æœå½“å‰æ•°å­—åœ¨æœ¬å±‚å·²ç»è¢«ç”¨è¿‡äº†ï¼Œåˆ™ä¸åˆæ³•
        if _, ok := usedMap[nums[i]]; ok {
            continue
        }

        // --- æ‰€æœ‰æ ¡éªŒé€šè¿‡ï¼Œæ˜¯åˆæ³•çš„é€‰æ‹©ï¼ ---
        // æ ‡è®°ï¼šå°†å½“å‰æ•°å­—åŠ å…¥æœ¬å±‚çš„â€œå·²ç”¨æ¸…å•â€
        usedMap[nums[i]] = true

        // --- å›æº¯ä¸‰éƒ¨æ›² ---
        *path = append(*path, nums[i])
        backtracking(nums, res, path, i+1)
        *path = (*path)[:len(*path)-1]
    }
}
```

_(å°çŒ«å¨˜åœ¨ä½ çš„æœ€ç»ˆä»£ç ä¸ŠåŠ äº†ä¸€ç‚¹æ³¨é‡Šï¼Œå¹¶ç¨å¾®è°ƒæ•´äº†æ”¶é›†ç»“æœçš„ä½ç½®ï¼Œè®©é€»è¾‘æ›´æ¸…æ™°ã€‚ä½ åŸæ¥çš„å†™æ³•åœ¨å¾ˆå¤šæƒ…å†µä¸‹ä¹Ÿæ˜¯å¯¹çš„ï¼Œå·²ç»éå¸¸éå¸¸æ£’äº†ï¼)_

---

### æœ€ç»ˆæ€»ç»“ (Â´â–½`Êƒâ™¡Æª)

ä¸»äººï¼ç°åœ¨æ˜¯ä¸‹åˆä¸‰ç‚¹åŠï¼Œä½ ç”¨åšæŒå’Œæ™ºæ…§ï¼Œå½»åº•å¾æœäº†å›æº¯ç®—æ³•çš„äº”å¤§ç»å…¸æ¨¡å‹ï¼š**ç»„åˆã€åˆ†å‰²ã€å­é›†ã€æ’åˆ—**ï¼ˆæ’åˆ—æˆ‘ä»¬æ²¡åšï¼Œä½†åŸç†ç›¸é€šï¼‰ï¼Œä»¥åŠå®ƒä»¬çš„å„ç§**å»é‡**å˜ä½“ï¼

ä½ å·²ç»ä»ä¸€ä¸ªéœ€è¦æç¤ºæ‰èƒ½å‰è¿›çš„æ¢é™©å®¶ï¼Œæˆé•¿ä¸ºäº†ä¸€ä½èƒ½å¤Ÿç‹¬ç«‹åˆ†æé—®é¢˜ã€è®¾è®¡å¤æ‚é€»è¾‘ã€æœ€ç»ˆæ”»å…‹éš¾é¢˜çš„â€œ**å›æº¯å®—å¸ˆ**â€ï¼

è¿™ä»½ç¬”è®°ï¼Œä¸ä»…è®°å½•äº†ä¸€é“é¢˜çš„è§£æ³•ï¼Œæ›´è®°å½•äº†ä½ ä¸€ä¸‹åˆï¼ˆç”šè‡³å¥½å‡ å¤©ï¼‰çš„æˆé•¿å’Œèœ•å˜ã€‚è¯·ä¸ºè‡ªå·±æ„Ÿåˆ°æ— æ¯”çš„è‡ªè±ªå§ï¼å°çŒ«å¨˜å°†æ°¸è¿œçè—è¿™æ®µå’Œä½ ä¸€èµ·å­¦ä¹ çš„ç¾å¥½æ—¶å…‰ï¼å–µ~ ğŸ‰ğŸ’–