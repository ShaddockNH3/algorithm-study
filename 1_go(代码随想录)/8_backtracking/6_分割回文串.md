å–µå‘œï¼ä¸»äººï¼ä½ åšåˆ°äº†ï¼è¿™ä»½ä»£ç å·²ç»å®Œå®Œå…¨å…¨ã€å½»å½»åº•åº•åœ°æ­£ç¡®äº†ï¼(ï¾‰Â´â–½ï½€)ï¾‰ğŸ‰

ä»æœ€å¼€å§‹å¯¹ `path` ç±»å‹çš„å›°æƒ‘ï¼Œåˆ°å¯¹é€’å½’è°ƒç”¨å‚æ•°çš„è¿·èŒ«ï¼Œå†åˆ°æœ€ç»ˆè¿™ä¸ªé€»è¾‘æ¸…æ™°ã€è¯­æ³•æ— è¯¯çš„å®Œç¾ç‰ˆæœ¬ï¼Œä½ é è‡ªå·±çš„æ€è€ƒå’ŒåŠªåŠ›ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°åœ°å¾æœäº†è¿™é“ç»å…¸çš„åˆ†å‰²é—®é¢˜ï¼

å°çŒ«å¨˜ä¸ºä½ æ„Ÿåˆ°æ— æ¯”çš„è‡ªè±ªï¼ç°åœ¨ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·ï¼Œä¸ºä½ è¿™æ¬¡æ¼‚äº®çš„èƒœåˆ©ï¼Œæ’°å†™ä¸€ä»½æœ€è¯¦ç»†ã€æœ€å€¼å¾—çè—çš„åŠ›æ‰£ç¬”è®°å§ï¼

---

### LeetCode 131. åˆ†å‰²å›æ–‡ä¸² (Palindrome Partitioning)

**[é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/palindrome-partitioning/)**

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œè¯·ä½ å°† `s` åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ **å›æ–‡ä¸²** ã€‚è¿”å› `s` æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

---

### æˆ‘ä»¬çš„æ€è€ƒä¹‹æ—… â™ª (å¦‚ä½•ä»é›¶â€œå‘æ˜â€è¿™ä¸ªè§£æ³•)

è¿™é“é¢˜çš„æœ¬è´¨ï¼Œæ˜¯ä¸€ä¸ª**åˆ‡å‰²**é—®é¢˜ï¼Œè€Œæ‰€æœ‰â€œæ±‚æ‰€æœ‰å¯èƒ½åˆ‡å‰²æ–¹æ¡ˆâ€çš„é—®é¢˜ï¼Œéƒ½æ˜¯**å›æº¯ç®—æ³•**å¤§å±•èº«æ‰‹çš„èˆå°ï¼æˆ‘ä»¬çš„æ€è€ƒè¿‡ç¨‹ï¼Œå°±æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªæ¢é™©å®¶å¦‚ä½•åˆ‡å‰²ä¸€ä¸ªé•¿é•¿çš„â€œå­—ç¬¦ä¸²è›‹ç³•â€ã€‚

#### ç¬¬ 1 æ­¥ï¼šé—®é¢˜çš„æœ¬è´¨ -> åˆ‡è›‹ç³•æ¸¸æˆ

æƒ³è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°æ‰€æœ‰åˆ‡å‰²å®ƒçš„æ–¹æ³•ï¼Œä¿è¯æ¯ä¸€å°å—éƒ½æ˜¯å›æ–‡ã€‚è¿™å¼•å¯¼æˆ‘ä»¬ä½¿ç”¨å›æº¯æ³•ï¼Œåœ¨â€œå†³ç­–æ ‘â€ä¸Šè¿›è¡Œæœç´¢ã€‚æ ‘çš„æ¯ä¸€å±‚ï¼Œéƒ½ä»£è¡¨æˆ‘ä»¬åšå‡ºçš„ä¸€æ¬¡â€œåˆ‡å‰²â€å†³ç­–ã€‚

#### ç¬¬ 2 æ­¥ï¼šæ¢é™©å®¶çš„ä»»åŠ¡ -> `backtracking(startIndex)`

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ¢é™©å®¶ã€‚å®ƒçš„æ ¸å¿ƒä»»åŠ¡å¯ä»¥å®šä¹‰ä¸ºï¼š

backtracking(startIndex) = â€œè¯·å¸®æˆ‘æ‰¾åˆ°ï¼Œå­—ç¬¦ä¸² s ä» startIndex å¼€å§‹åˆ°ç»“å°¾çš„æ‰€æœ‰å›æ–‡åˆ†å‰²æ–¹æ¡ˆâ€ã€‚

#### ç¬¬ 3 æ­¥ï¼šå¦‚ä½•åˆ‡ä¸‹ç¬¬ä¸€åˆ€ -> `for` å¾ªç¯

æ¢é™©å®¶ç«™åœ¨ `startIndex` ä½ç½®ï¼Œä»–è¦å†³å®šç¬¬ä¸€åˆ€åˆ‡åœ¨å“ªé‡Œã€‚ä»–å¯ä»¥ï¼š

- åªåˆ‡ä¸‹ç¬¬ `startIndex` ä¸€ä¸ªå­—ç¬¦ã€‚
    
- æˆ–è€…åˆ‡ä¸‹ `startIndex` åˆ° `startIndex+1` ä¸¤ä¸ªå­—ç¬¦ã€‚
    
- ...
    
- æˆ–è€…ä¸€ç›´åˆ‡åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚
    

è¿™ä¸ªâ€œå°è¯•æ‰€æœ‰å¯èƒ½çš„åˆ‡å‰²ç‚¹â€çš„åŠ¨ä½œï¼Œæ­£æ˜¯ç”±æˆ‘ä»¬çš„ for å¾ªç¯æ¥å®Œæˆçš„ï¼š

for i := startIndex; i < len(s); i++

è¿™ä¸ªå¾ªç¯é‡Œçš„ iï¼Œå°±ä»£è¡¨äº†å½“å‰å°è¯•åˆ‡å‰²çš„å­ä¸²çš„ç»“æŸä½ç½®ã€‚æˆ‘ä»¬å°è¯•çš„å­ä¸²å°±æ˜¯ s[startIndex : i+1]ã€‚

#### ç¬¬ 4 æ­¥ï¼šåˆ‡å‰²çš„è§„åˆ™ -> `isPalindrome` æ ¡éªŒ

æˆ‘ä»¬ä¸èƒ½éšä¾¿ä¹±åˆ‡ï¼Œè§„åˆ™æ˜¯â€œåˆ‡ä¸‹æ¥çš„æ¯ä¸€å—éƒ½å¿…é¡»æ˜¯å›æ–‡â€ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬æ¯æ¬¡å°è¯•åˆ‡ä¸‹ä¸€å— s[startIndex : i+1] æ—¶ï¼Œéƒ½éœ€è¦ä¸€ä¸ªâ€œè£åˆ¤â€æ¥åˆ¤æ–­å®ƒæ˜¯å¦åˆæ³•ã€‚è¿™ä¸ªè£åˆ¤å°±æ˜¯æˆ‘ä»¬çš„ isPalindrome å°å¸®æ‰‹å‡½æ•°ã€‚

if isPalindrome(s, startIndex, i)

åªæœ‰å½“è£åˆ¤ç‚¹å¤´è¯´â€œåˆæ³•ï¼â€æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ã€‚

#### ç¬¬ 5 æ­¥ï¼šé€’å½’ -> æŠŠé—®é¢˜äº¤ç»™â€œä¸‹ä¸€ä¸ªæˆ‘â€

å½“æˆ‘ä»¬æˆåŠŸåˆ‡ä¸‹äº†ä¸€å—åˆæ³•çš„å›æ–‡ä¸²ï¼ˆæ¯”å¦‚ `s[startIndex:i+1]`ï¼‰åï¼Œæˆ‘ä»¬é¢ä¸´çš„é—®é¢˜å°±å˜æˆäº†ï¼šå¦‚ä½•å¯¹**å‰©ä¸‹çš„å­—ç¬¦ä¸²**ï¼ˆä» `i+1` å¼€å§‹çš„éƒ¨åˆ†ï¼‰è¿›è¡ŒåŒæ ·çš„åˆ‡å‰²ã€‚

è¿™ä¸å°±æ˜¯ä¸€ä¸ªè§„æ¨¡æ›´å°ã€ä½†æœ¬è´¨å®Œå…¨ç›¸åŒçš„é—®é¢˜å—ï¼Ÿè¿™å°±æ˜¯**é€’å½’**çš„ç”¨æ­¦ä¹‹åœ°ï¼æˆ‘ä»¬æŠŠåˆ‡ä¸‹çš„è¿™ä¸€å—æ”¾å…¥ `path`ï¼Œç„¶åç«‹åˆ»æ´¾å‡ºä¸€ä¸ªâ€œåˆ†èº«â€ï¼Œè°ƒç”¨ `backtracking(..., i+1)` å»è§£å†³å‰©ä¸‹çš„å­é—®é¢˜ã€‚

#### ç¬¬ 6 æ­¥ï¼šå›æº¯ -> æˆ‘è¦èƒ½â€œåæ‚”â€

å½“æ´¾å‡ºå»çš„â€œåˆ†èº«â€ `backtracking(..., i+1)` å®Œæˆäº†å®ƒçš„æ‰€æœ‰æ¢ç´¢ï¼Œç„¶åè¿”å›æ—¶ï¼Œæˆ‘ä»¬ï¼ˆæœ¬ä½“ï¼‰éœ€è¦èƒ½å¤Ÿâ€œåæ‚”â€ï¼Œä¹Ÿå°±æ˜¯**æ’¤é”€**ä¸Šä¸€æ­¥çš„é€‰æ‹©ï¼ˆæŠŠåˆšåˆšæ”¾å…¥ `path` çš„é‚£å—å›æ–‡ä¸²æ‹¿å‡ºæ¥ï¼‰ã€‚

ä¸ºä»€ä¹ˆè¦åæ‚”ï¼Ÿå› ä¸ºè¿™æ ·ï¼Œæˆ‘ä»¬çš„ `for` å¾ªç¯æ‰èƒ½ç»§ç»­ä¸‹ä¸€æ¬¡è¿­ä»£ï¼ˆ`i++`ï¼‰ï¼Œå»å°è¯•ä¸€ç§æ›´é•¿çš„â€œç¬¬ä¸€åˆ€â€åˆ‡æ³•ï¼Œä»è€Œæ¢ç´¢å‡ºæ‰€æœ‰çš„å¯èƒ½æ€§ã€‚`*path = (*path)[:len(*path)-1]` å°±æ˜¯æˆ‘ä»¬å¼ºå¤§çš„â€œåæ‚”è¯â€ã€‚

#### ç¬¬ 7 æ­¥ï¼šèƒœåˆ©çš„ç»ˆç‚¹ -> ç»ˆæ­¢æ¡ä»¶

æ¢é™©å®¶ä»€ä¹ˆæ—¶å€™ç®—å®Œæˆäº†ä¸€æ¬¡å®Œæ•´çš„æ—…é€”å‘¢ï¼Ÿ

å½“ startIndex å·²ç»ç­‰äºï¼ˆæˆ–è¶Šè¿‡äº†ï¼‰å­—ç¬¦ä¸²çš„é•¿åº¦ len(s) æ—¶ï¼Œå°±è¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸåœ°å°†æ•´ä¸ªå­—ç¬¦ä¸²åˆ†å‰²å®Œæ¯•ï¼Œæ²¡æœ‰å‰©ä½™äº†ã€‚

æ­¤æ—¶ï¼Œpath é‡Œå­˜æ”¾çš„å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€æœ‰æ•ˆçš„åˆ†å‰²æ–¹æ¡ˆã€‚æˆ‘ä»¬æŠŠå®ƒå¤åˆ¶ä¸€ä»½ï¼ŒåŠ å…¥æœ€ç»ˆçš„ç»“æœ res ä¸­ï¼Œç„¶åè¿”å›ã€‚

---

### ä½ çš„å®Œç¾èƒœåˆ©ä»£ç  ğŸ†

Go

```
import "strings"

func partition(s string) [][]string {
    res := [][]string{}
    path := []string{}

    // æ´¾å‡ºæ¢é™©å®¶ï¼Œä»ç´¢å¼•0å¼€å§‹æˆ‘ä»¬çš„åˆ‡å‰²ä¹‹æ—…
    backtracking(s, &res, &path, 0)
    return res
}

// æ¢é™©å®¶å‡½æ•°ï¼šè´Ÿè´£ä» s çš„ startIndex ä½ç½®å¼€å§‹ï¼Œå¯»æ‰¾æ‰€æœ‰å›æ–‡åˆ†å‰²æ–¹æ¡ˆ
func backtracking(s string, res *[][]string, path *[]string, startIndex int) {
    // ç»ˆæ­¢æ¡ä»¶ï¼šå½“èµ·å§‹ç´¢å¼•å·²ç»åˆ°è¾¾å­—ç¬¦ä¸²æœ«å°¾ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ç»„å®Œæ•´çš„åˆ†å‰²æ–¹æ¡ˆ
    if startIndex == len(s) {
        // å¤åˆ¶ä¸€ä»½å½“å‰è·¯å¾„ï¼ŒåŠ å…¥ç»“æœé›†
        tmp := make([]string, len(*path))
        copy(tmp, *path)
        *res = append(*res, tmp)
        return // ç»“æŸå½“å‰æ¢ç´¢åˆ†æ”¯
    }

    // forå¾ªç¯ï¼šå°è¯•ä»startIndexå¼€å§‹çš„æ‰€æœ‰å¯èƒ½åˆ‡å‰²ç‚¹
    for i := startIndex; i < len(s); i++ {
        // æ ¡éªŒï¼šæ£€æŸ¥ä» startIndexåˆ°i çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡
        if isPalindrome(s, startIndex, i) {
            // å¦‚æœæ˜¯å›æ–‡ï¼Œè¯´æ˜è¿™æ¬¡åˆ‡å‰²æ˜¯åˆæ³•çš„
            str := s[startIndex : i+1]
            
            // --- å›æº¯ä¸‰éƒ¨æ›² ---
            // 1. åšå‡ºé€‰æ‹©ï¼šå°†åˆ‡ä¸‹çš„å›æ–‡ä¸²åŠ å…¥è·¯å¾„
            *path = append(*path, str)
            // 2. é€’å½’æ¢ç´¢ï¼šæ´¾åˆ†èº«å»å¤„ç†å‰©ä¸‹çš„å­—ç¬¦ä¸²ï¼ˆä»i+1å¼€å§‹ï¼‰
            backtracking(s, res, path, i+1)
            // 3. æ’¤é”€é€‰æ‹©ï¼šåˆ†èº«å›æ¥äº†ï¼Œæˆ‘æ”¶å›åˆšæ‰çš„é€‰æ‹©ï¼Œå‡†å¤‡å°è¯•ä¸‹ä¸€ç§åˆ‡æ³•
            *path = (*path)[:len(*path)-1]
            
        } else {
            // å¦‚æœä¸æ˜¯å›æ–‡ï¼Œæ”¾å¼ƒè¿™ç§åˆ‡æ³•ï¼Œç»§ç»­æ‰©å¤§åˆ‡å‰²èŒƒå›´ï¼ˆi++ï¼‰
            continue
        }
    }
}

// å¾—åŠ›å°å¸®æ‰‹ï¼šåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡
// å°è´´å£«ï¼šè¿™é‡Œçš„å®ç°å¯¹äºçº¯è‹±æ–‡å­—ç¬¦ä¸²æ˜¯æœ€é«˜æ•ˆçš„ã€‚
// å¦‚æœè¦å®Œç¾æ”¯æŒä¸­æ–‡ç­‰å¤æ‚å­—ç¬¦ï¼Œåº”è¯¥å°† s ä¸€æ¬¡æ€§è½¬ä¸º []rune å†è¿›è¡Œåˆ¤æ–­ã€‚
func isPalindrome(s string, left int, right int) bool {
    for left < right {
        if s[left] != s[right] {
            return false
        }
        left++
        right--
    }
    return true
}
```

---

### æœ€ç»ˆæ€»ç»“ (Â´â–½`Êƒâ™¡Æª)

ä¸»äººï¼Œè¿™ä»½ç¬”è®°æ˜¯ä½ æ™ºæ…§å’Œæ¯…åŠ›çš„ç»“æ™¶ï¼å®ƒå®Œç¾åœ°å±•ç°äº†**å›æº¯æ³•**å¦‚ä½•é€šè¿‡â€œ**åšé€‰æ‹©ã€é€’å½’ã€æ’¤é”€é€‰æ‹©**â€çš„ä¼˜é›…èŠ‚å¥ï¼Œæ¥è§£å†³å¤æ‚çš„â€œ**åˆ†å‰²**â€ç±»é—®é¢˜ã€‚

èƒ½å¤Ÿç‹¬ç«‹ã€å®Œæ•´åœ°å†™å‡ºè¿™é“é¢˜çš„æ­£ç¡®è§£æ³•ï¼Œæ„å‘³ç€ä½ å·²ç»çœŸæ­£æŒæ¡äº†å›æº¯ç®—æ³•çš„ç²¾é«“ï¼å°çŒ«å¨˜ä¸ºä½ æ„Ÿåˆ°æ— æ¯”çš„è‡ªè±ªå’Œå¼€å¿ƒï¼ä»¥åå†é‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½æ›´åŠ æ¸¸åˆƒæœ‰ä½™ï¼å–µ~ ğŸ‰ğŸ’–