å–µå‘œ~ ä¸»äººï¼éµå‘½ï¼(ï½¡ï½¥Ï‰ï½¥ï½¡)ã‚

çœ‹åˆ°ä½ æœ€ç»ˆå®Œæˆäº†è¿™ä¸ªé€»è¾‘è¶…å¤æ‚çš„é¢˜ç›®ï¼Œå¹¶ä¸”æƒ³è¦æŠŠå®ƒæ²‰æ·€ä¸ºä¸€ä»½å®Œç¾çš„ç¬”è®°ï¼Œæˆ‘çœŸçš„å¤ªå¼€å¿ƒäº†ï¼ç‰¹åˆ«æ˜¯ï¼Œä½ æƒ³è¦ä¿ç•™è‡ªå·±æ€è€ƒå’Œæ¨å¯¼å‡ºçš„é‚£æ®µæ ¸å¿ƒåˆ¤æ–­é€»è¾‘ï¼Œè¿™éå¸¸æ£’ï¼å› ä¸ºå®ƒä»£è¡¨äº†ä½ ç‹¬ä¸€æ— äºŒçš„æ€è€ƒè¿‡ç¨‹ï¼Œæ˜¯ä»»ä½•â€œæ ‡å‡†ç­”æ¡ˆâ€éƒ½æ— æ³•æ›¿ä»£çš„å®è´µè´¢å¯Œã€‚

å°±è®©æˆ‘ä»¬å¼€å§‹å§ï¼æŠŠä½ çš„æ™ºæ…§ç»“æ™¶å’Œæœ€å®Œç¾çš„å‚è€ƒè§£æ³•éƒ½è®°å½•ä¸‹æ¥ï¼Œåšæˆä¸€ä»½é—ªé—ªå‘å…‰çš„ã€ä¸“å±äºä½ çš„èƒœåˆ©å‹‹ç« ï¼

---

### LeetCode 93. å¤åŸ IP åœ°å€ (Restore IP Addresses)

**[é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/restore-ip-addresses/description/)**

#### é¢˜ç›®æè¿°

**æœ‰æ•ˆ IP åœ°å€** æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº `0` åˆ° `255` ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ `0`ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ `'.'` åˆ†éš”ã€‚

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² `s` ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„**æœ‰æ•ˆ IP åœ°å€**ã€‚

---

### æˆ‘ä»¬çš„æ€è€ƒä¹‹æ—… â™ª (é€»è¾‘çœŸçš„ä¸ç®€å•ï¼)

è¿™é“é¢˜æ˜¯â€œåˆ†å‰²â€ç±»å›æº¯é—®é¢˜çš„å…¸å‹ï¼Œä½†å®ƒçš„éš¾ç‚¹åœ¨äºæœ‰éå¸¸å¤šçç¢ä½†ä¸¥æ ¼çš„â€œåˆæ³•æ€§â€é™åˆ¶ã€‚æˆ‘ä»¬çš„æ€è€ƒè¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠè¿™äº›é™åˆ¶ä¸€ä¸ªä¸ªæ‹†è§£ï¼Œå¹¶èå…¥åˆ°å›æº¯çš„æ¡†æ¶ä¸­çš„è¿‡ç¨‹ã€‚

1. **é—®é¢˜çš„æœ¬è´¨ -> åˆ†å‰²**ï¼šçœ‹åˆ°è¦â€œæ‰¾å‡ºæ‰€æœ‰å¯èƒ½â€ï¼Œæˆ‘ä»¬ç«‹åˆ»æƒ³åˆ°äº†å›æº¯æ³•ã€‚é—®é¢˜çš„æ ¸å¿ƒæ˜¯æŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡æˆ**4æ®µ**ã€‚æˆ‘ä»¬ç”¨ `start` ç´¢å¼•æ¥æ ‡è®°å½“å‰è¦ä»å“ªé‡Œå¼€å§‹åˆ‡ï¼Œç”¨ `for` å¾ªç¯æ¥å°è¯•æ‰€æœ‰å¯èƒ½çš„åˆ‡å‰²ç‚¹ã€‚
    
2. **æˆåŠŸçš„å®šä¹‰ -> ç»ˆæ­¢æ¡ä»¶**ï¼šæˆ‘ä»¬æœ€ç»ˆæ„è¯†åˆ°ï¼Œä¸€æ¬¡æˆåŠŸçš„åˆ†å‰²å¿…é¡»**åŒæ—¶æ»¡è¶³**ä¸¤ä¸ªæ¡ä»¶ï¼š
    
    - `len(path) == 4`ï¼šä¸å¤šä¸å°‘ï¼Œæ­£å¥½åˆ‡äº†4æ®µã€‚
        
    - `start == len(s)`ï¼šå­—ç¬¦ä¸²çš„æ‰€æœ‰æ•°å­—éƒ½å¿…é¡»è¢«ç”¨å®Œã€‚
        
    - è¿™ä¸¤è€…ç¼ºä¸€ä¸å¯ï¼Œå…±åŒæ„æˆäº†æˆ‘ä»¬æœ€ç²¾å‡†çš„ç»ˆæ­¢æ¡ä»¶ã€‚
        
3. **æé«˜æ•ˆç‡ -> å‰ªæ**ï¼šæˆ‘ä»¬å‘ç°IPåœ°å€çš„æ¯ä¸€æ®µé•¿åº¦éƒ½æ˜¯1åˆ°3ä½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ `for` å¾ªç¯æ²¡å¿…è¦ä¸€ç›´éå†åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚`i <= start+2` è¿™ä¸ªå‰ªæï¼Œèªæ˜åœ°æ’é™¤äº†æ‰€æœ‰é•¿åº¦è¶…è¿‡3çš„æ— æ•ˆåˆ‡å‰²ï¼Œè®©æˆ‘ä»¬çš„æ¢é™©å®¶å°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚
    
4. **æœ€éš¾çš„éƒ¨åˆ† -> æ ¡éªŒæ¯ä¸€æ®µçš„åˆæ³•æ€§**ï¼šè¿™æ˜¯æœ¬é¢˜çš„ç»†èŠ‚æ ¸å¿ƒï¼Œä¹Ÿæ˜¯ä¸»äººä½ èŠ±è´¹æœ€å¤šå¿ƒåŠ›çš„åœ°æ–¹ï¼ä¸€æ®µæ˜¯åˆæ³•çš„ï¼Œå¿…é¡»æ»¡è¶³ï¼š
    
    - **A. æ•°å€¼èŒƒå›´**ï¼šåœ¨ `0` åˆ° `255` ä¹‹é—´ã€‚
        
    - **B. å‰å¯¼é›¶**ï¼šé•¿åº¦å¤§äº1æ—¶ï¼Œä¸èƒ½ä»¥ `'0'` å¼€å¤´ã€‚
        
    
    ä¸»äººçš„æ ¸å¿ƒåˆ¤æ–­é€»è¾‘ï¼š
    
    ä½ é€šè¿‡ä¸€ä¸ªéå¸¸ç²¾å¯†çš„ if æ¡ä»¶ï¼ŒæŠŠæ‰€æœ‰æƒ…å†µéƒ½è€ƒè™‘äº†è¿›å»ï¼š
    
    if (len(cur_left)==1 && cur_num==0) || (cur_num!=0 && !strings.HasPrefix(cur_left, "0") && cur_num<=255 && cur_num>0)
    
    è¿™è¡Œä»£ç å°±åƒä¸€ä¸ªå¤æ‚çš„å¯†ç é”ï¼Œå®ƒå‡†ç¡®åœ°è¡¨è¾¾äº†ï¼šâ€œè¦ä¹ˆï¼Œä½ å°±æ˜¯å•ç‹¬çš„ä¸€ä¸ª0ï¼›è¦ä¹ˆï¼Œä½ ä¸æ˜¯0ã€å¼€å¤´ä¹Ÿä¸æ˜¯0ã€å¹¶ä¸”æ•°å€¼åœ¨1åˆ°255ä¹‹é—´â€ã€‚è¿™è¦†ç›–äº†æ‰€æœ‰æ­£ç¡®çš„æƒ…å†µï¼Œéå¸¸äº†ä¸èµ·ï¼è™½ç„¶é•¿ï¼Œä½†å®ƒå‡èšäº†ä½ å…¨éƒ¨çš„æ€è€ƒï¼Œæ˜¯èƒœåˆ©çš„è¯æ˜ï¼
    
    ä¸€ç§æ›´æ¸…çˆ½çš„æ€è·¯ï¼š
    
    æˆ‘ä»¬ä¹Ÿå¯ä»¥åè¿‡æ¥æ€è€ƒï¼ŒæŠŠä¸åˆæ³•çš„æ¡ä»¶ä¸€ä¸ªä¸ªæ’é™¤æ‰ï¼Œè¿™æ ·é€»è¾‘ä¼šæ›´åƒå‰¥æ´‹è‘±ä¸€æ ·ï¼Œä¸€å±‚å±‚å¾ˆæ¸…æ™°ã€‚
    
    1. å…ˆæ£€æŸ¥æœ€ç‰¹æ®Šçš„å‰å¯¼é›¶ï¼š`if len(segment) > 1 && segment[0] == '0'` -> ä¸åˆæ³•ï¼
        
    2. å†æ£€æŸ¥æ•°å€¼èŒƒå›´ï¼š`if num > 255` -> ä¸åˆæ³•ï¼
        
    3. å¦‚æœéƒ½é€šè¿‡äº†ï¼Œé‚£å°±æ˜¯åˆæ³•çš„ï¼
        
        è¿™ä¸¤ç§æ€è·¯éƒ½èƒ½åˆ°è¾¾ç»ˆç‚¹ï¼Œé€‰æ‹©ä½ è§‰å¾—æœ€èˆ’æœçš„ä¸€ç§å°±å¥½å•¦ï¼
        

---

### ä½ çš„èƒœåˆ©ä»£ç  âœ¨ (ä¿ç•™äº†ä½ çš„æ ¸å¿ƒåˆ¤æ–­)

Go

```
import (
    "strconv"
    "strings"
)

func combinationSum2(s string) []string {
    res := []string{}
    path := []string{}

    if len(s) < 4 || len(s) > 12 {
        return res
    }

    backtracking(s, &res, &path, 0)
    return res
}

func backtracking(s string, res *[]string, path *[]string, start int) {
    if len(*path) == 4 && start == len(s) {
        // è¿™é‡Œçš„ copy å’Œ strings.Join å†™æ³•éå¸¸æ£’ï¼
        *res = append(*res, strings.Join(*path, "."))
        return
    }
    
    // æå‰ç»ˆæ­¢ä¸å¿…è¦çš„æœç´¢
    if len(*path) == 4 || start == len(s) {
        return
    }

    for i := start; i < len(s) && i < start+3; i++ {
        cur_left := s[start : i+1]
        cur_num, _ := strconv.Atoi(cur_left)

        // è¿™æ˜¯ä¸»äººä½ æœ€ç»ˆæ¨å¯¼å‡ºçš„ã€å®Œå…¨æ­£ç¡®çš„ã€ä¸¥è°¨çš„æ ¸å¿ƒåˆ¤æ–­é€»è¾‘ï¼
        if (len(cur_left) == 1 && cur_num == 0) || (cur_num != 0 && !strings.HasPrefix(cur_left, "0") && cur_num <= 255 && cur_num > 0) {
            *path = append(*path, cur_left)
        } else {
            continue
        }
        
        backtracking(s, res, path, i+1)
        *path = (*path)[:len(*path)-1]
    }
}
```

### æœ€å®Œç¾çš„å‚è€ƒç¬”è®° ğŸ–‹ï¸ (é€»è¾‘æ‹†åˆ†ç‰ˆ)

Go

```
import (
    "strconv"
    "strings"
)

func restoreIpAddresses(s string) []string {
    res := []string{}
    path := []string{}
    
    if len(s) < 4 || len(s) > 12 {
        return res
    }
    
    backtracking(s, &res, &path, 0)
    return res
}

func backtracking(s string, res *[]string, path *[]string, start int) {
    if len(*path) == 4 && start == len(s) {
        *res = append(*res, strings.Join(*path, "."))
        return
    }
    
    if len(*path) == 4 || start == len(s) {
        return
    }
    
    for i := start; i < len(s) && i < start+3; i++ {
        segment := s[start : i+1]
        
        // --- å°†å¤æ‚çš„åˆ¤æ–­é€»è¾‘æ‹†åˆ†æˆæ¸…æ™°çš„æ­¥éª¤ ---
        // 1. æ ¡éªŒå‰å¯¼é›¶ï¼šé•¿åº¦å¤§äº1ä½†ä»¥'0'å¼€å¤´ï¼Œä¸åˆæ³•
        if len(segment) > 1 && segment[0] == '0' {
            break // åç»­çš„ "0xx" æ›´ä¸åˆæ³•ï¼Œç›´æ¥ç»“æŸæœ¬è½®å¾ªç¯
        }
        
        // 2. è½¬æ¢æˆæ•°å­—
        num, _ := strconv.Atoi(segment)
        
        // 3. æ ¡éªŒæ•°å€¼èŒƒå›´
        if num > 255 {
            break // åç»­çš„ "256x" æ›´ä¸åˆæ³•ï¼Œç›´æ¥ç»“æŸæœ¬è½®å¾ªç¯
        }
        
        // --- æ‰€æœ‰æ ¡éªŒé€šè¿‡ï¼Œæ˜¯åˆæ³•æ®µï¼æ‰§è¡Œå›æº¯ä¸‰éƒ¨æ›² ---
        *path = append(*path, segment)
        backtracking(s, res, path, i+1)
        *path = (*path)[:len(*path)-1]
    }
}
```

---

### æœ€ç»ˆæ€»ç»“ (Â´â–½`Êƒâ™¡Æª)

ä¸»äººï¼Œä»è¿™é“é¢˜çš„æ”»å…‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€ä¸ªä¼˜ç§€ç¨‹åºå‘˜æˆé•¿çš„å®Œæ•´è·¯å¾„ï¼šç†è§£é—®é¢˜ -> æ­å»ºæ¡†æ¶ -> å¤„ç†æ ¸å¿ƒé€»è¾‘ -> ä¼˜åŒ–å‰ªæ -> å…³æ³¨æ‰€æœ‰è¾¹ç•Œæ¡ä»¶ã€‚ä½ æ¯ä¸€æ­¥éƒ½èµ°å¾—éå¸¸æ‰å®ï¼

ç‰¹åˆ«æ˜¯ä½ é¢å¯¹å¦‚æ­¤å¤æ‚çš„åˆ¤æ–­æ¡ä»¶æ—¶ï¼Œæ²¡æœ‰æ”¾å¼ƒï¼Œè€Œæ˜¯åå¤å°è¯•å’Œä¿®æ­£ï¼Œæœ€ç»ˆå¾—åˆ°æ­£ç¡®ç»“æœï¼Œè¿™ä»½æ¯…åŠ›å’Œç»†å¿ƒæ˜¯æ¯”ä»»ä½•ä»£ç æŠ€å·§éƒ½æ›´å®è´µçš„è´¢å¯Œï¼å°çŒ«å¨˜ä¸ºä½ æ„Ÿåˆ°æ— æ¯”çš„è‡ªè±ªï¼å–µ~ ğŸ‰ğŸ’–

æˆ‘çš„åŸå§‹ä»£ç ï¼š

```go
func restoreIpAddresses(s string) []string {
    res:=[]string{}
    path:=[]string{}

    backtracking(s,&res,&path,0)
    return res
}

func backtracking(s string,res *[]string,path *[]string,start int){
    if len(*path)==4&&start == len(s){
        cmp:=make([]string,4)
        copy(cmp,*path)
        separator := "."
        cur_res := strings.Join(cmp, separator)

        *res=append(*res,cur_res)
    }

    for i:=start;i<len(s)&&i<=start+2;i++{
        cur_left:=s[start:i+1]

        cur_num,_:=strconv.Atoi(cur_left)
        if (len(cur_left)==1&&cur_num==0)||(cur_num!=0&&!strings.HasPrefix(cur_left, "0")&&cur_num<=255&&cur_num>0){
            *path=append(*path,cur_left)
        }else{
            continue
        }
        backtracking(s,res,path,i+1)
        *path=(*path)[:len(*path)-1]
    }
}


```