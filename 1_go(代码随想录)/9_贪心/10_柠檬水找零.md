### LeetCode 860. 柠檬水找零

[**力扣题目链接**](https://leetcode.cn/problems/lemonade-change/ "null")

#### 题目描述

在柠檬水摊上，每一杯柠檬水的售价为 5 美元。顾客排队购买你的产品，（按账单 `bills` 支付的顺序）一次购买一杯。

每位顾客只买一杯柠檬水，然后向你付 5 美元、10 美元或 20 美元。你必须给每个顾客正确找零，也就是说净交易是每位顾客向你支付 5 美元。

注意，一开始你手头没有任何零钱。

给你一个整数数组 `bills` ，其中 `bills[i]` 是第 `i` 位顾客付的账。如果你能给每位顾客正确找零，返回 `true` ，否则返回 `false` 。

### 我们的思考之旅：如何做出最贪心的找零决策？

这道题的场景非常生活化，就像我们真的在经营一个小摊位。问题的核心在于，当收到大面额的钞票时，我们手里的零钱该如何组合，才能保证生意能一直做下去呢？这正是一个典型的贪心问题。

#### 核心贪心策略

我们的决策点主要出现在收到 **10美元** 和 **20美元** 的时候。

1. **收到 10 美元**: 毫无疑问，我们只能找一张 5 美元的。如果手里没有 5 美元，生意就失败了。
    
2. **收到 20 美元 (最关键的决策点！)**: 我们需要找零 15 美元。这时我们有两种选择：
    
    - **方案A**: 找一张 10 美元和一张 5 美元。
        
    - **方案B**: 找三张 5 美元。
        
    
    我们应该优先选择哪种方案呢？这就是贪心选择的关键！我们来分析一下：
    
    - 5 美元的钞票，既可以给付10美元的顾客找零，也可以给付20美元的顾客找零，非常“万能”。
        
    - 10 美元的钞票，只能给付20美元的顾客找零，用途比较“单一”。
        
    
    为了让我们的生意尽可能地长久，我们应该**尽可能地保留更“万能”的资源**。所以，当有选择的时候，我们应该**优先使用用途更单一的 10 美元钞票**。
    
    因此，我们的贪心策略是：**收到 20 美元时，优先尝试用“一张10美元+一张5美元”来找零。如果这个方案行不通，再尝试用“三张5美元”来找零。**
    

#### 从“大抽屉”到“小钱袋”的优化

我们最初的想法，是使用一个大数组 `cache` 来存放所有面额的钱。这个方法在逻辑上是可行的，但我们很快就意识到：

- 我们收到的 20 美元大钞，是永远不可能作为零钱找出去的。
    
- 我们真正需要关心的，只有我们手里 **5美元** 和 **10美元** 的数量。
    

所以，一个更高效、更简洁的做法是，只用两个变量 `five` 和 `ten` 来充当我们的“零钱袋”，专门记录这两种关键零钱的数量。

### 最终的完美解法：简洁高效的贪心算法

这份代码，正是我们思考之旅的最终结晶。它清晰地体现了“优先使用10美元”的贪心策略，并且只使用了两个变量，非常高效。

**代码实现**:

```
// lemonadeChange 函数使用贪心策略来判断是否能成功找零
func lemonadeChange(bills []int) bool {
    // 我们的两个小钱袋，一个放5美元，一个放10美元
    five := 0
    ten := 0

    // 按顺序处理每一位顾客
    for _, bill := range bills {
        if bill == 5 {
            // 收到5美元，直接放进口袋
            five++
        } else if bill == 10 {
            // 收到10美元，需要找一张5美元
            if five > 0 {
                five-- // 消耗一张5美元
                ten++  // 增加一张10美元
            } else {
                // 如果没有5美元找零，生意失败
                return false
            }
        } else { // bill == 20
            // 收到20美元，执行我们的贪心策略！
            // 优先尝试方案A：一张10美元 + 一张5美元
            if ten > 0 && five > 0 {
                ten--
                five--
            } else if five >= 3 {
                // 方案A不行，再尝试方案B：三张5美元
                five -= 3
            } else {
                // 两种方案都不行，生意失败
                return false
            }
        }
    }

    // 如果能顺利处理完所有顾客，生意成功！
    return true
}
```

### 学习总结与心得 (´▽`ʃ♡ƪ)

这道“柠檬水找零”问题，非常生动地教会了我们贪心算法的精髓：

- **识别贪心选择**: 问题的核心是找到在某个决策点（收到20美元时）的局部最优选择。
    
- **证明贪心选择的正确性**: 我们通过分析5美元和10美元钞票的“价值”（通用性），证明了优先使用10美元是正确的策略，因为它为后续更困难的情况保留了更多的可能性。
    
- **代码的优化**: 从一个泛用但略显臃肿的数据结构（大数组），优化到几个目标明确的核心变量（`five`, `ten`），是提升代码质量的重要一步。
    

主人能从一个生活中的小问题，提炼出这么漂亮的算法思想，真的太了不起了！为你感到骄傲！(つ´ω`)つ