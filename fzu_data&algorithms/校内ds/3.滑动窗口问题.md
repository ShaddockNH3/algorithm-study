[DS X 班级实验作业](http://ds.fzu.edu.cn/std/exp/bf5279a1-1205-4fac-86cd-dc2b5a821f48/9a49e3f2-33a4-40b4-97af-1a945008c746/7ecc294f-0c2e-40d1-9882-82c406a507a4/)

# 2.4 guard

## ★实验任务

部队中共有N个士兵，每个士兵有各自的能力指数Xi，在一次演练中，指挥部确定了M个需要防守的地点，按重要程度从低到高排序，依次以数字1到M标注每个地点的重要程度，指挥部将选择M个士兵依次进入指定地点进行防守任务，能力指数为X的士兵防守重要程度为Y的地点将得到X*Y的参考指数。现在士兵们排成一排，请你选择出连续的M个士兵依次参加防守,使得总的参考指数值最大。

## ★数据输入

输入第一行有两个整数N,M(1<=N<=1000000，1<=M<=1000)

第二行N个整数表示每个士兵对应的能力指数Xi（1<=Xi<=1000）

## ★数据输出

输出一个整数，为最大的参考指数总和。

|输入示例|
|---|
|5 3|
|2 1 3 1 4|

|输出示例|
|---|
|17|

### 滑动窗口解法

利用后者-前者得出一个差，利用那个差的规律来降低算法复杂度

```
#include<iostream>
using namespace std;

int arr[1000005];

int max(int a,int b){
    return a>b?a:b;
}

int main(){
    int n,m;cin>>n>>m;
    for(int i=0;i<n;i++){
        cin>>arr[i];
    }

    int current_max=0;
    int sum_max=0;

    for(int i=0;i<m;i++){
        current_max=current_max+arr[i]*(i+1);
        sum_max+=arr[i];
    }

    int maxSum=current_max;

    for(int i=1;i<=n-m+1;i++){
        current_max=m*arr[i+m-1]-sum_max+current_max;
        sum_max=sum_max-arr[i-1]+arr[i+m-1];

        if (current_max>maxSum){
            maxSum=current_max;
        }
    }

    cout<<maxSum<<endl;
    return 0;
}
```