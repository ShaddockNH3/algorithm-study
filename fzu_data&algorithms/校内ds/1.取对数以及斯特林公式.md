[DS X 班级实验作业](http://ds.fzu.edu.cn/std/exp/bf5279a1-1205-4fac-86cd-dc2b5a821f48/7b259d05-8f24-4161-a527-0a3b41643fc0/cc3add37-77bf-407a-a46c-e8c27939518c/)

算法与数据结构实验题 1.10 单身狗进化

★实验任务

这一天晚上，弯通又做梦了，并且梦到了一个帅气的男孩纸！这个男孩给了弯通一个数字 n。男孩离开前告诉弯通，n!（n 的阶乘）的位数就是距离弯通脱单的天数。矜（ji）持（ke）的弯通想知道自己还有多久能脱单，快写个程序帮助他！

★数据输入

输入第一行为一个正整数 n（1<=n<=25000）。

★数据输出

输出 n！的位数。

|输入示例1|
|---|
|10|

|输出示例1|
|---|
|7|

|输入示例2|
|---|
|20|

|输出示例2|
|---|
|19|

### 法一，以最基本的取对数

```
#include<iostream>
#include<cmath>
using namespace std;

int main(){
    int n;cin>>n;
    double sum=0;
    for(int i=1;i<=n;i++){
        sum+=log10(i);
    }
    cout<<(int)sum+1<<endl;
    return 0;
}
```

### 法2，斯特林公式

需要注意的是，斯特林公式在取对数之后，也可以化简！

gpt如下：

$n! \approx \sqrt{2 \pi n} \left(\frac{n}{e}\right)^n$

$\log_{10}(n!) \approx \log_{10}(\sqrt{2 \pi n}) + \log_{10}\left(\left(\frac{n}{e}\right)^n\right)$

$\log_{10}(n!) \approx \frac{1}{2} \log_{10}(2 \pi n) + n \log_{10}\left(\frac{n}{e}\right)$

$\text{位数} = \lfloor \log_{10}(n!) \rfloor + 1$

```
#include<iostream>
#include<cmath>
#define E     2.71828182845904523536
#define Pi    3.14159265358979323846
using namespace std;

int main(){
    double n;cin>>n;
    double a=0.5*log10(2*Pi*n)+n*log10(n/E);
    cout<<(int)a+1<<endl;
    return 0;
}
```

如果直接使用斯特林公式的话，精度不够。

