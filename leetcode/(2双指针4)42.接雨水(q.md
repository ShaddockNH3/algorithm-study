[42. 接雨水 - 力扣（LeetCode）](https://leetcode.cn/problems/trapping-rain-water/?envType=study-plan-v2&envId=top-100-liked)

标签：

[[5.单调栈]]

双指针

### 解题

这道题有四种解法，第一种暴力按下不表，第二种实际上就是利用动态规划，维护一个leftmax和rightmax数组（最大数组）。然后再遍历一次，取两个数组对应标签的最小值与本身标签对应的值相减即可

第二种解法则是利用单调栈。单调栈维护的是当前位置向左的最近最大值，只从左往右算，依赖的是单调栈最近最大值的特性，可以知道什么时候结算

第三种解法则是利用双指针，本质上也是为了确定什么时候开始计算ans，从左往右算的时候，依赖的是左侧最低，而从右往左算的时候，依赖的是右侧最低

双指针的代码如下：

```cpp
class Solution {
public:
    int trap(vector<int>& height) {
        int left=0,right=height.size()-1;
        int leftmax=height[left],rightmax=height[right];

        int ans=0;

        while(left<right){
            if(height[left]<height[right]){
                if(leftmax<height[left]){
                    leftmax=height[left];
                }
                else{
                    ans+=(leftmax-height[left]);
                }
                left++;
            }
            else{
                if(rightmax<height[right]){
                    rightmax=height[right];
                }
                else{
                    ans+=(rightmax-height[right]);
                }
                right--;
            }
        }
        
        return ans;
    }
};
```

